# VRCLogAnalyzer
VRChatのログを解析して、訪れたワールドやその場にいたユーザーのデータベースを作成するWFPアプリです。

現在、ベータ版で動作確認してくれる方を募っています。

![動作画面](docs/img/MainWindow.png "メイン画面")


## 動作環境

- OS: Windows 10 （64bit）
- SteamからVRChatを起動（Oculusからの起動は未確認）
- （任意）VRChatの起動オプションに「--enable-sdk-log-levels」を追加
  - ユーザー情報とワールドの詳細をログ出力させるためのオプション追加
  - すでにほかのオプションを指定している場合は、半角スペースで区切って追加する。
  - なくても動くとの情報もあるので、現在、条件確認中です。ユーザーのプロフィールやワールドの説明書きなどは、このオプションがないと取得できないかもしれません。（ただ、特にユーザープロフィールはオプションがあっても必ずログに出るとは限らないため、未確定）

![VRChatプロパティを開く](docs/img/vrcproperty.png "VRChatプロパティ")
![オプションに --enable-sdk-log-levels を追加](docs/img/enable-sdk-log-levels.png "VRChatオプション")

対応環境は、今後拡大する可能性はありますが、複数環境への対応大変なので、自分も使っている一般的なVRChat環境に限定して動作確認しています。

## 動作説明

- VRChatのデフォルトのログパスからログファイルを取得し、データベースに格納します。
- データベースファイルは、現在MyDocuments直下（VRCLogAnalyzer.db）に置かれています（ベータ完了後、長期的な保存に適したフォルダに移行予定）
- データベースはSQLite3を利用しており、SQLite3のクライアントから直接確認することも可能です。


## 操作方法

### データベースの更新

- アプリ起動後、「設定」メニューから「データの更新」を選択すると、ログからデータベースにデータが取り込まれます。
- データベースの更新は、コマンドラインから「VRCLogAnalyzer.exe /analyze」とオプションをつけて実行することもできます。VRChatのログは、数日でローテーションして消えてしまうので、これをタスクスケジューラ等から1日1回実行するような使い方を想定しています。

### 訪問履歴データの表示

- 自分が行ったワールドと、そこで一緒になったユーザーをその時間をとともに表示します。日付、ユーザー名、ワールド名で絞り込んで検索することができます。（ユーザー名、ワールド名は、部分一致検索です。大文字小文字は区別しません）
  - v0.1では、自分が表示対象外だったため、誰とも会っていないワールドは表示対象に含まれませんでしたが、v0.2から自分も表示対象にするように変更しました。
  - この変更で訪れたワールドがすべて表示されるようになったので、ワールド履歴表示機能を別に用意するのではなく、現在の機能のみで対応するように方針変更しています。
- ワールドの説明文やユーザーのプロフィールがログから取得できている場合は、マウスカーソルをかざすとその内容がポップアップされます。ただ、必ずしもこの情報がログに出るとは限らないようなので、すべては表示されないことをご了解ください。（ログ表示される条件がわかる方がいたら、教えてもらえると助かります）


## アプリのコンセプト

### コンセプト

- みんなが使える、安心設計のVRChat履歴アプリ
  - ローカルPCに閉じたログ解析で、VRChatに追加の負担をかけずに誰もが使える
  - シンプルで、どのような処理をしているのか明確
  - プライバシーを尊重し、ユーザーデータは必要最低限だけ


### このアプリではやらないこと

- ログ以外（VRChat APIやVRChatウェブサイトを含む）からの情報収集
  - VRChat APIは、非公式となっており、また、多くの人がAPIにアクセスすることでVRChatのサーバー側負荷が高くなってしまうおそれがあるため、ローカルPCだけで話が完結するログのみをデータソースとして利用する
  - 結果として、VRChatのIDとパスワードが必要になるようなリソースも利用しない
  - ユーザープロフィールなど、詳細情報が取れない場合もありますが、それはこのアプリのコンセプト上やむを得ないと考えています。（取れたらラッキーぐらいで考えておいてください）
- 現在表示している以上のユーザー情報の収集
  - プライバシーを考慮し、このアプリでは収集する情報はVRChat上で会ってプロフィールを確認すればわかる範囲に収集対象を限定し、表示に利用している以上のユーザー情報を収集しない
  - 何回会っているなど、フレンド管理のような機能も提供しない
- 訪問履歴以外のワールド情報の提供
  - ワールドの情報は、訪問履歴の記録のためだけに利用する。（不具合対応や今後の機能拡張に備えてワールドのID等は記録はしているが、アプリ側で直接表示する機能は設けない）


